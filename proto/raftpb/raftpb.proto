syntax="proto3";

package raftpb;

option go_package = "github.com/zbchi/linkv/proto/raftpb";

message RequestVoteRequest{
    uint64 candidateId=1;
    uint64 currentTerm=2;
    uint64 lastLogIndex=3;
    uint64 lastLogTerm=4;
}

message RequestVoteResponse{
    bool isVote=1;
    uint64 Term=2;
}

message LogEntry{
    int64 term=1;
    int64 index=2;
    bytes command=3;
}


message AppendEntriesRequest{
    int64 term=1;
    int64 Leader=2;
    repeated LogEntry entries=3;
    int64 leaderCommit=4;
    int64 preLogIndex=5;
    int64 preLogTerm=6;
}

message AppendEntriesResponse{
    bool isSucess=1;
    int64 term=2;
    int64 conflictTerm=3;
    int64 conflictIndex=4;
}

service Raft{
    rpc AppendEntries(AppendEntriesRequest)returns (AppendEntriesResponse);
    rpc RequestVote(RequestVoteRequest)returns(RequestVoteResponse);
}